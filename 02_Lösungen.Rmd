## Sitzung 2 {-}


### Aufgabe 1

#### a)

```{r}
set.seed(4525)
runif(6, 10, 80) %>%
  round() %>%
  lectuR::get_mean() -> mean_a

tribble(
  ~Schritt, ~Musterlösung, ~Punkte, ~Implizit,
  "Formel", mean_a$formel, 0, T,
  "Einsetzen", mean_a$einsetzen, 0, T,
  "Ergebnis", mean_a$ergebnis, 0, T,
) %>% lectuR::solution_table(meta=F)
```

#### b)

```{r}
set.seed(4525)
runif(8, -1, 1) %>%
  round(3) %>%
  lectuR::get_mean() -> mean_b
tribble(
  ~Schritt, ~Musterlösung, ~Punkte, ~Implizit,
  "Formel", mean_b$formel, 0, T,
  "Einsetzen", mean_b$einsetzen, 0, T,
  "Ergebnis", mean_b$ergebnis, 0, T,
) %>% lectuR::solution_table(meta=F)
```

#### c)

```{r}
set.seed(4525)
runif(10, 600, 1000) %>%
  round(2) %>%
  lectuR::get_mean() -> mean_c
tribble(
  ~Schritt, ~Musterlösung, ~Punkte, ~Implizit,
  "Formel", mean_a$formel, 0, T,
  "Einsetzen", mean_c$einsetzen, 0, T,
  "Ergebnis", mean_c$ergebnis, 0, T,
) %>% lectuR::solution_table(meta=F)
```

### Aufgabe 2

#### a)

```{r}
set.seed(4525)
runif(6, 10, 80) -> a
  lectuR::get_var(a) -> var_a
  lectuR::get_sd(a) -> sd_a

tribble(
  ~Schritt, ~Musterlösung, ~Punkte, ~Implizit,
  "Varianz: Formel", var_a$formel, 0, T,
  "Varianz: Einsetzen", var_a$einsetzen, 0, T,
  "Varianz: Ergebnis", var_a$ergebnis, 0, T,
  "Standardabweichung: Formel", sd_a$formel, 0, T,
  "Standardabweichung: Einsetzen", sd_a$einsetzen, 0, T,
  "Varianz: Ergebnis", sd_a$ergebnis, 0, T,
) %>% lectuR::solution_table(meta=F)
```


### Aufgabe 3

```{r}
xs <- scan("../img/2_exercise")

```

#### a)

Die geordnete Liste ist:

```{r, results='asis', comment=NA}
cat('> `', sort(xs), '`') 
```

Für das arithmetische Mittel und die Varianz ist diese Tabelle hilfreich:

\medskip
\begin{center}
\begin{tabular}{r|r|r|r|r|r}
\toprule
$x_i$ & $f_i$ & $f_i\cdot x_i$ & $(x_i-\bar{x})$ & $(x_i-\bar{x})^2$ & $f_i\cdot(x_i-\bar{x})^2$ \\
\midrule
```{r, results='asis', comment=NA}
df <- data.frame(table(xs))
df$xs <- as.numeric(levels(df$xs)[df$xs])
df[,3] <- df$xs * df$Freq
df[,4] <- df$xs - mean(xs)
df[,5] <- (df$xs - mean(xs))^2
df[,6] <- df$Freq*(df$xs - mean(xs))^2
df[] <- round(df,2)
df[] <- lapply(format(df, decimal.mark=","), as.character)
write.table(df, quote=F, eol="\\\\\n", sep="&", row.names=F, col.names = F)
```
\bottomrule
\end{tabular}
\end{center}
\medskip

Der häufigste Wert (und damit der Modalwert) ist 2.

Die Stichprobengröße ist ungerade ($n=13$), daher ist der Median: $$x_{(\frac{n+1}{2})} = x_{(7)} = 2$$

Das arithmetische Mittel berechnet sich einfacher mit den Werten aus der Tabelle:

\[\bar{x}={\displaystyle\frac{\sum\limits_{x=1}^nx_i}{n}}=\frac{3+8+6+8+5+6}{13}=\frac{37}{13}\approx2.85\]

#### b)

Die Spannweite ist: $$R=x_{(n)}-x_{(1)}=7-1=6$$

Der Quartilsabstand ist: $$\mathit{IQR}=Q_3-Q_1=4-2=2$$

Für die Varianz bieten sich ebenfalls die Tabellenwerte an: $$s^2=\frac{\sum\limits_{x=1}^n(x_i-\bar{x})^2}{n-1}\approx\frac{10,22+ 2,86+ 0,05+ 2,66+ 4,64+17,25}{13-1}=\frac{37,68}{12}=3.14$$

Schließlich ist die Standardabweichung: $$s=\sqrt{s^2}\approx\sqrt{3,14}\approx1,77$$

#### c)

Da der untere Angelpunkt und der Median zusammenfallen, sieht der Boxplot etwas ungewöhnlich aus:

```{r, fig.height=6}
boxplot(xs)
```

### Aufgabe 4

#### a)

Es gibt eine Hierarchie der Werte (Ordinal-), sinnvolle Abstände (Intervall-) und einen sinnvollen Nullpunkt (Verhältnis-). Deshalb sind die angegebenen Werte als verhältnisskaliert zu verstehen.

#### b)

Die Klassengröße 2,5 cm ergibt überschaubare neun Klassen und runde Zahlen.

Um die Berechnung des arithmetischen Mittels zu vereinfachen berechnen wir auch gleich den Klassendurchnitt und Zwischensummen:

\medskip
\begin{center}
\begin{tabular}{r|r|r|r|r}
\toprule
Wertebereich (cm)& Klassendurchschnitt & Häufigkeit & Kumulative Häufigkeit & Produkt \\
$x$ & $k_i$ & $f_i$ & $f_{kum}$ &$f_i\cdot k_i$ \\
\midrule
```{r, results='asis', comment=NA}
options(OutDec = ".")
df <- data.frame(table(cut(DAAG::fossum$totlngth, right=F, breaks=seq(75,97.5,2.5))))
options(OutDec = ",")
von <- sub("^\\[([0-9.]+),([0-9.]+)\\)", "\\1", df[,1]) %>% as.numeric
bis <- sub("^\\[([0-9.]+),([0-9.]+)\\)", "\\2", df[,1]) %>% as.numeric
df[,1] <- paste(format(von, decimal.mark = ","), "bis unter", format(bis, decimal.mark = ","))
df[,3] <- df[,2]
df[,2] <- (von + bis) / 2
df[,4] <- cumsum(df[,3])
df[,5] <- df[,2] * df[,3]
df[,6] <- df[,2] - 88.05
df[,7] <- (df[,2] - 88.05)^2
df[,8] <- df[,3]*(df[,2] - 88.05)^2
df[,5:8] <- round(df[,5:8],2)
tf <- as.data.frame(lapply(format(df, decimal.mark=","), as.character))
write.table(tf[,1:5], quote=F, eol="\\\\\n", sep=" & ", row.names=F, col.names = F)
```
\bottomrule
\end{tabular}
\end{center}
\medskip

#### b)

Der Modalwert der klassierten Stichprobe ist die Klasse "87,5 bis unter 90,0".

#### d)

Bei $n=43$ ist $Q_1=\frac{x_{(11)}+x_{(12)}}{2}$ und $Q_3=\frac{x_{(32)}+x_{(33)}}{2}$.

Aus der geordneten Liste können wir $Q_1=85,25$ und $Q_3=90,75$ bestimmen.

Wenn uns nur die klassierte Verteilung zur Verfügung steht oder wenn der Datensatz besonders unübersichtlich ist, ist es auch legitim, aus der kumulativen Häufigkeit $Q_1=83,75$ und $Q_3=91,25$ für die klassierte Verteilung abzulesen.

Je nachdem beträgt der Quartilsabstand $\mathit{IQR}=Q_3-Q_1$ dann 5,5 oder 7,5 cm.

#### e)

Die Summen für das arithmetische Mittel entnehmen wir der letzten Spalte der Wertetabelle:

\[\begin{aligned}
  \bar{x}&=\frac{\sum\limits_{i=1}^nx_i}{n} \\
         &=\frac{76,25+ 243,75+ 418,75+ 603,75+1242,50+ 821,25+ 187,50+ 192,50}{43} \\
         &=\frac{3786,25}{43} \\
         &\approx88,05
\end{aligned}\]

#### f)

Für die Standardabweichung brauchen wir andere Werte in der Tabelle:

\medskip
\begin{center}
\begin{tabular}{r|r|r|r|r|r}
\toprule
Wertebereich $x$ & $k_i$ & $f_i$ & $(k_i-\bar{x})$ & $(k_i-\bar{x})^2$ & $f_i\cdot(k_i-\bar{x})^2$ \\
\midrule
```{r, results='asis', comment=NA}
write.table(tf[,c(1:3, 6:8)], quote=F, eol="\\\\\n", sep=" & ", row.names=F, col.names = F)
```
\bottomrule
\end{tabular}
\end{center}
\medskip

Die Varianz beträgt:

\[\begin{aligned}
  s^2&=\frac{\sum\limits_{i=1}^{n}(x_{i}-\bar{x})^2}{n-1} \\[4pt]
     &=\frac{139,24+138,72+ 92,45+ 22,68+  6,86+ 92,16+ 64,98+134,48}{43-1}\\[4pt]
     &=\frac{691,57}{42}\approx{16,47}
\end{aligned}\]

Somit beträgt die Standardabweichung $$s\approx\sqrt{16,47}\approx4,06$$

#### g)

Beim Boxplot stellt der Ausreißer nach unten eine Besonderheit dar, der kleiner als der Minimalwert $$Q_1-1,5\cdot\mathit{IQR}=83,75-1,5\cdot5,5=75,5$$ ist und somit als Kreis dargestellt wird:

```{r, fig.height=6}
boxplot(DAAG::fossum$totlngth)
```

### Aufgabe 5

#### a)

```{r}
set.seed(1616)
ziegelei <- round(rnorm(6,80,10))
moebellager <- round(rnorm(6,70,18))
mean_ziegelei <- lectuR::get_mean(ziegelei)
mean_moebellager <- lectuR::get_mean(moebellager, "y")

tribble(
  ~Schritt, ~Musterlösung, ~Punkte, ~Implizit,
  "Formel", get_mean()$formel, 1, F,
  "Einsetzen", mean_ziegelei$einsetzen, 0.5, F,
  "Ergebnis", mean_ziegelei$ergebnis, 1, F,
  "Einsetzen", mean_moebellager$einsetzen, 0.5, F,
  "Ergebnis", mean_moebellager$ergebnis, 1, F,
  "Antwortsatz", sprintf("%s weist im Mittel die größere Passant\\*innenzahl auf.",
                         ifelse(mean_moebellager$raw > mean_ziegelei$raw,
                                "Das Möbellager", "Die Ziegelei")), 1, F
) %>% lectuR::solution_table(meta=F)
```

#### b)

```{r}
iqr_ziegellager <- lectuR::get_iqr(ziegelei, T)
iqr_moebellager <- lectuR::get_iqr(ziegelei, T, "y")

tribble(
  ~Schritt, ~Musterlösung, ~Punkte, ~Implizit,
  "Formel", lectuR::get_iqr()$formel, 1, F,
  "Einsetzen", iqr_ziegellager$einsetzen, 0.5, F,
  "Ergebnis", iqr_ziegellager$ergebnis, 1, F,
  "Einsetzen", iqr_moebellager$einsetzen, 0.5, F,
  "Ergebnis", iqr_moebellager$ergebnis, 1, F,
  "Antwortsatz", sprintf("%s hat den größeren Quartilsabstand für die Passant\\*innenzahl.",
                         ifelse(iqr_moebellager$raw > iqr_ziegellager$raw,
                                "Das Möbellager", "Die Ziegelei")), 1, F
) %>% lectuR::solution_table(meta=F)
```

#### c)

**Für die Ziegelei:**

```{r}
var_ziegelei <- lectuR::get_var(alt=T, ziegelei)
sd_ziegelei <- lectuR::get_sd(alt=T, ziegelei)
tribble(
  ~Schritt, ~Musterlösung, ~Punkte, ~Implizit,
  "Varianz: Formel", get_var()$formel, 0.5, F,
  "Varianz: Einsetzen", var_ziegelei$einsetzen, 0.5, T,
  "Varianz: Ergebnis", var_ziegelei$ergebnis, 0.5, T,
  "Standardabweichung: Formel", get_sd()$formel, 0.5, T,
  "Standardabweichung: Ergebnis", sd_ziegelei$ergebnis, 1, T,
  "Variationskoeffizient: Formel",  "$v=\\frac{s}{|\\bar{x}|}\\cdot100\\%\\quad$", 0.5, F,
  "Variationskoeffizient: Einsetzen", "$v\\approx\\frac{11,54}{74,67}\\cdot100\\%\\quad$", 0.5, F,
  "Variationskoeffizient: Ergebnis", sprintf("$v \\approx %s\\%%$", fmt(sd_ziegelei$raw/mean_ziegelei$raw*100)), 1, F
) %>% lectuR::solution_table(meta=F)
```

**Für das Möbellager:**

```{r}
var_moebellager <- lectuR::get_var(moebellager, alt=T, symbol="y")
sd_moebellager <- lectuR::get_sd(moebellager, alt=T, symbol="y")
tribble(
  ~Schritt, ~Musterlösung, ~Punkte, ~Implizit,
  "Varianz: Formel", get_var()$formel, 0.5, F,
  "Varianz: Einsetzen", var_moebellager$einsetzen, 0.5, T,
  "Varianz: Ergebnis", var_moebellager$ergebnis, 0.5, T,
  "Standardabweichung: Formel", sd_moebellager$formel, 0.5, T,
  "Standardabweichung: Ergebnis", sd_moebellager$ergebnis, 1, T,
  "Variationskoeffizient: Formel",  "$v=\\frac{s}{|\\bar{x}|}\\cdot100\\%\\quad$", 0.5, F,
  "Variationskoeffizient: Einsetzen", "$v\\approx\\frac{11,54}{74,67}\\cdot100\\%\\quad$", 0.5, F,
  "Variationskoeffizient: Ergebnis", sprintf("$v \\approx %s\\%%$", fmt(sd_moebellager$raw/mean_moebellager$raw*100)), 1, F
) %>% lectuR::solution_table(meta=F)
```
